<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Publications? lol</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #111;
            color: #eee;
            padding: 50px;
            line-height: 1.6;
            overflow: hidden; /* stops GIF from going offscreen */
        }
        h1 { color: #ff66cc; }
        p { margin: 5px 0; }
        .ascii { font-size: 0.9em; color: #66ff66; }
        .gif { 
            position: absolute; 
            width: 150px; 
            pointer-events: none; /* so it doesn’t block cursor */
        }
    </style>
</head>
<body>
<script>
function getCookie(name) {
    let match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
    if (match) return parseInt(match[2]);
    return 0;
}

function setCookie(name, value, days) {
    let expires = "";
    if (days) {
        let date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}

let visits = getCookie("rss_visits") + 1;
setCookie("rss_visits", visits, 1);

let critters = ["(=^･ω･^=)", "(>^_^)>", "(ᵔᴥᵔ)", "(•‿•)", "ʕ•ᴥ•ʔ", "(=^･ｪ･^=)", "(ง'̀-'́)ง", "(^._.^)", "(✿◠‿◠)", "(•ω•)"];
let randomCritter = critters[Math.floor(Math.random() * critters.length)];

if(visits === 1) {
    document.body.innerHTML = `<h1>what are you doing here lol</h1>
        <p>this page doesn't exist</p>
        <p>shoo shoo</p>
        <p>go away</p>
        <p>get comon go now</p>
        <img id="broom" class="gif" src="/content/mainsite/assets/video/ohnonotthebroom.gif" alt="oh no not the broom!">
        <p class="ascii">${randomCritter}</p>`;

    const broom = document.getElementById("broom");
    let broomX = window.innerWidth/2;
    let broomY = window.innerHeight/2;
    let speed = 3; // pixels per frame

    window.addEventListener("mousemove", e => {
        let dx = e.clientX - broomX;
        let dy = e.clientY - broomY;
        let dist = Math.sqrt(dx*dx + dy*dy);

        if(dist < 50) {
            window.location.href = "/index.html"; // TOUCH = teleport to homepage
        }

        broomX += dx/dist * speed;
        broomY += dy/dist * speed;
        broom.style.left = broomX + "px";
        broom.style.top = broomY + "px";
    });

} else if(visits === 2) {
    document.body.innerHTML = `<h1>you again??</h1>
        <p>fine. come in. bring snacks.</p>
        <p class="ascii">${randomCritter}</p>`;
} else if(visits >= 3) {
    document.body.innerHTML = `<h1>welcome back</h1>
        <p>i've named you Employee #404.</p>
        <!-- <img class="gif" src="/content/mainsite/assets/video/giggtygiggtycrabbitygiggty.gif" alt="giggty giggty crabbity giggty"> -->
        <p class="ascii">${randomCritter}</p>`;
}
</script>
</body>
</html>
